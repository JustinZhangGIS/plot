//>>built
define("plot/PlotDraw","dojo/_base/declare dojo/_base/lang dojo/Evented ./constants ./plotUtils esri/graphic esri/Color esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon ./geometry/Arc ./geometry/AssaultDirection ./geometry/AttackArrow ./geometry/Circle ./geometry/ClosedCurve ./geometry/Curve ./geometry/DoubleArrow ./geometry/Ellipse ./geometry/FineArrow ./geometry/FreehandLine ./geometry/FreehandPolygon ./geometry/GatheringPlace ./geometry/Lune ./geometry/Marker ./geometry/Polygon ./geometry/Polyline ./geometry/Rectangle ./geometry/Sector ./geometry/SquadCombat ./geometry/StraightArrow ./geometry/TailedAttackArrow ./geometry/TailedSquadCombat".split(" "),
function(m,d,n,f,g,p,e,h,k,l,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O){var c=m([n],{constructor:function(a){this.markerSymbol=new h(h.STYLE_SQUARE,8,null,new e("#000000"));this.lineSymbol=new k(k.STYLE_SOLID,new e("#000000"),2);this.fillSymbol=new l(l.STYLE_SOLID,this.lineSymbol,new e([0,0,0,0.25]));this._firstClickHandler=d.hitch(this,this._firstClickHandler);this._nextClickHandler=d.hitch(this,this._nextClickHandler);this._doubleClickHandler=d.hitch(this,this._doubleClickHandler);this._mouseMoveHandler=
d.hitch(this,this._mouseMoveHandler);this._plotParams=this._plotType=this._graphic=this._plot=this._points=null;this._map=a},activate:function(a,b){this.deactivate();this._map.disableDoubleClickZoom();this._firstClick_Connect=this._map.on("click",this._firstClickHandler);this._plotType=a;this._plotParams=b},deactivate:function(){this._firstClick_Connect&&this._firstClick_Connect.remove();this._nextClick_Connect&&this._nextClick_Connect.remove();this._doubleClick_Connect&&this._doubleClick_Connect.remove();
this._mouseMove_Connect&&this._mouseMove_Connect.remove();this._map.enableDoubleClickZoom();this._map.graphics.remove(this._graphic);this._points=[];this._plotParams=this._plotType=this._graphic=this._plot=null},isDrawing:null!=this._plotType,_firstClickHandler:function(a){this._firstClick_Connect.remove();this._points.push([a.mapPoint.x,a.mapPoint.y]);this._plot=this._createPlot(this._plotType,this._points,this._plotParams);this._graphic=new p;this._graphic.setSymbol(this._generateSymbol(this._plot));
this._map.graphics.add(this._graphic);this._plot.fixPointCount==this._plot.getPointCount()?this._doubleClickHandler(a):(this._nextClick_Connect=this._map.on("click",this._nextClickHandler),this._plot.freehand||(this._doubleClick_Connect=this._map.on("dbl-click",this._doubleClickHandler)),this._mouseMove_Connect=this._map.on("mouse-move",this._mouseMoveHandler))},_nextClickHandler:function(a){if(this._plot.freehand||!(g.distance([a.mapPoint.x,a.mapPoint.y],this._points[this._points.length-1])<f.ZERO_TOLERANCE))this._points.push([a.mapPoint.x,
a.mapPoint.y]),this._plot.setPoints(this._points),this._plot.fixPointCount==this._plot.getPointCount()?this._doubleClickHandler(a):(this._plot&&this._plot.freehand&&this._doubleClickHandler(a),this._graphic.setGeometry(this._generateGeometry(this._plot)))},_doubleClickHandler:function(a){this.emit("draw-end",{geometry:this._generateGeometry(this._plot),plot:this._plot});this.deactivate()},_mouseMoveHandler:function(a){g.distance([a.mapPoint.x,a.mapPoint.y],this._points[this._points.length-1])<f.ZERO_TOLERANCE||
(this._plot.freehand?(this._points.push([a.mapPoint.x,a.mapPoint.y]),this._plot.setPoints(this._points)):(a=this._points.concat([[a.mapPoint.x,a.mapPoint.y]]),this._plot.setPoints(a)),this._graphic.setGeometry(this._generateGeometry(this._plot)))},_generateGeometry:function(a){var b;"point"===a.type?b=new q(a.x,a.y):"polyline"===a.type?b=new r(a.paths):"polygon"===a.type&&(b=new s(a.rings));b.spatialReference=this._map.spatialReference;return b},_generateSymbol:function(a){var b;"point"===a.type?
b=this.markerSymbol:"polyline"===a.type?b=this.lineSymbol:"polygon"===a.type&&(b=this.fillSymbol);return b},_createPlot:function(a,b){switch(a){case c.ARC:return new t(b);case c.ELLIPSE:return new A(b);case c.CURVE:return new y(b);case c.CLOSED_CURVE:return new x(b);case c.LUNE:return new F(b);case c.SECTOR:return new K(b);case c.GATHERING_PLACE:return new E(b);case c.STRAIGHT_ARROW:return new M(b);case c.ASSAULT_DIRECTION:return new u(b);case c.ATTACK_ARROW:return new v(b);case c.FINE_ARROW:return new B(b);
case c.CIRCLE:return new w(b);case c.DOUBLE_ARROW:return new z(b);case c.TAILED_ATTACK_ARROW:return new N(b);case c.SQUAD_COMBAT:return new L(b);case c.TAILED_SQUAD_COMBAT:return new O(b);case c.FREEHAND_LINE:return new C(b);case c.FREEHAND_POLYGON:return new D(b);case c.POLYGON:return new H(b);case c.MARKER:return new G(b);case c.RECTANGLE:return new J(b);case c.POLYLINE:return new I(b)}}});d.mixin(c,{ARC:"arc",ELLIPSE:"ellipse",CURVE:"curve",CLOSED_CURVE:"closedcurve",LUNE:"lune",SECTOR:"sector",
GATHERING_PLACE:"gatheringplace",STRAIGHT_ARROW:"straightarrow",ASSAULT_DIRECTION:"assaultdirection",ATTACK_ARROW:"attackarrow",TAILED_ATTACK_ARROW:"tailedattackarrow",SQUAD_COMBAT:"squadcombat",TAILED_SQUAD_COMBAT:"tailedsquadcombat",FINE_ARROW:"finearrow",CIRCLE:"circle",DOUBLE_ARROW:"doublearrow",POLYLINE:"polyline",FREEHAND_LINE:"freehandline",POLYGON:"polygon",FREEHAND_POLYGON:"freehandpolygon",RECTANGLE:"rectangle",MARKER:"marker",TRIANGLE:"triangle"});return c});
//# sourceMappingURL=PlotDraw.js.map