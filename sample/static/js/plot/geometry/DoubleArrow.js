//>>built
define("plot/geometry/DoubleArrow",["dojo/_base/declare","../constants","../plotUtils","./PlotGeometry"],function(m,k,f,p){return m([p],{constructor:function(a){this.type="polygon";this.plotType="doublearrow";this.headHeightFactor=0.25;this.headWidthFactor=0.3;this.neckHeightFactor=0.85;this.neckWidthFactor=0.15;this.tempPoint4=this.connPoint=null;this.fixPointCount=4;this.setPoints(a)},generate:function(){var a=this.getPointCount();if(!(2>a))if(2==a)this.rings=this.points;else{var e=this.points[0],
c=this.points[1],b=this.points[2],a=this.getPointCount();this.tempPoint4=3==a?this.getTempPoint4(e,c,b):this.points[3];this.connPoint=3==a||4==a?f.mid(e,c):this.points[4];var d;f.isClockWise(e,c,b)?(a=this.getArrowPoints(e,this.connPoint,this.tempPoint4,!1),d=this.getArrowPoints(this.connPoint,c,b,!0)):(a=this.getArrowPoints(c,this.connPoint,b,!1),d=this.getArrowPoints(this.connPoint,e,this.tempPoint4,!0));var h=a.length,g=(h-5)/2,c=a.slice(0,g),e=a.slice(g,g+5),a=a.slice(g+5,h),b=d.slice(0,g),l=
d.slice(g,g+5);d=d.slice(g+5,h);b=f.getBezierPoints(b);c=f.getBezierPoints(d.concat(c.slice(1)));a=f.getBezierPoints(a);e=b.concat(l,c,e,a);this.rings=e.concat([e[0]])}},finishDrawing:function(){3==this.getPointCount()&&null!=this.tempPoint4&&this.points.push(this.tempPoint4);null!=this.connPoint&&this.points.push(this.connPoint)},getArrowPoints:function(a,e,c,b){var d=f.mid(a,e),h=f.distance(d,c),g=f.getThirdPoint(c,d,0,0.3*h,!0),l=f.getThirdPoint(c,d,0,0.5*h,!0),g=f.getThirdPoint(d,g,k.HALF_PI,
h/5,b),l=f.getThirdPoint(d,l,k.HALF_PI,h/4,b),h=[d,g,l,c];c=this.getArrowHeadPoints(h,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor);b=c[0];d=c[4];g=f.distance(a,e)/f.getBaseLength(h)/2;g=this.getArrowBodyPoints(h,b,d,g);l=g.length;h=g.slice(0,l/2);g=g.slice(l/2,l);h.push(b);g.push(d);h=h.reverse();h.push(e);g=g.reverse();g.push(a);return h.reverse().concat(c,g)},getArrowHeadPoints:function(a,e,c){var b=f.getBaseLength(a)*this.headHeightFactor,d=a[a.length-
1];f.distance(e,c);c=b*this.headWidthFactor;e=b*this.neckWidthFactor;var h=b*this.neckHeightFactor,b=f.getThirdPoint(a[a.length-2],d,0,b,!0),h=f.getThirdPoint(a[a.length-2],d,0,h,!0);a=f.getThirdPoint(d,b,k.HALF_PI,c,!1);c=f.getThirdPoint(d,b,k.HALF_PI,c,!0);b=f.getThirdPoint(d,h,k.HALF_PI,e,!1);e=f.getThirdPoint(d,h,k.HALF_PI,e,!0);return[b,a,d,c,e]},getArrowBodyPoints:function(a,e,c,b){var d=f.wholeDistance(a);b*=f.getBaseLength(a);e=f.distance(e,c);e=(b-e)/2;c=0;for(var h=[],g=[],l=1;l<a.length-
1;l++){var k=f.getAngleOfThreePoints(a[l-1],a[l],a[l+1])/2;c+=f.distance(a[l-1],a[l]);var n=(b/2-c/d*e)/Math.sin(k),m=f.getThirdPoint(a[l-1],a[l],Math.PI-k,n,!0),k=f.getThirdPoint(a[l-1],a[l],k,n,!1);h.push(m);g.push(k)}return h.concat(g)},getTempPoint4:function(a,e,c){e=f.mid(a,e);var b=f.distance(e,c),d=f.getAngleOfThreePoints(a,e,c);d<k.HALF_PI?(c=b*Math.sin(d),b*=Math.cos(d),a=f.getThirdPoint(a,e,k.HALF_PI,c,!1),a=f.getThirdPoint(e,a,k.HALF_PI,b,!0)):d>=k.HALF_PI&&d<Math.PI?(c=b*Math.sin(Math.PI-
d),b*=Math.cos(Math.PI-d),a=f.getThirdPoint(a,e,k.HALF_PI,c,!1),a=f.getThirdPoint(e,a,k.HALF_PI,b,!1)):d>=Math.PI&&d<1.5*Math.PI?(c=b*Math.sin(d-Math.PI),b*=Math.cos(d-Math.PI),a=f.getThirdPoint(a,e,k.HALF_PI,c,!0),a=f.getThirdPoint(e,a,k.HALF_PI,b,!0)):(c=b*Math.sin(2*Math.PI-d),b*=Math.cos(2*Math.PI-d),a=f.getThirdPoint(a,e,k.HALF_PI,c,!0),a=f.getThirdPoint(e,a,k.HALF_PI,b,!1));return a}})});
//# sourceMappingURL=DoubleArrow.js.map